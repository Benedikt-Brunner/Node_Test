<html>

<head>
    <title>
        Test


    </title>
    <link rel="shortcut icon" type="image/x-icon" href="site_favicon_16_1664892280095.ico" />
    <link rel="stylesheet" href="Players.css">
</head>

<body onload = updatePlayers()>

    <div class="butdiv">
        
        <h1>
            <a href="/">&lt/Sc Springer Bad König></a>
        </h1>
            <button onclick=updatePlayers()>Update</button>
        </div>

  
    <div class="table-wrapper">
        <table class="fl-table">
            <thead>
                <tr>
                    <th>Weiß</th>
                    <th>Schwarz</th>
                    <th>Ergebniss</th>
                    <th>SpielTyp</th>
                    <th>Datum</th>
                    <th>Link</th>
                </tr>
            </thead>
            <tbody id="Games">


            <tbody>
        </table>
    </div>






    <script>

        function updatePlayers() {
            let test = document.getElementById('Games')
            if (test.innerHTML.length != 0) {
                test.innerHTML = "";
            }
            fetch('/getgames', {
                method: 'GET',
                headers: { 'Content-Type': 'application/json' },

            })
                .then(response => response.text())
                .then(text => JSON.parse(text))
                .then(games => {
                    for (let i = 0; i < games.length; i++) {
                        let table = document.getElementById('Games');
                        let tr = document.createElement('tr');
                        let td1 = document.createElement('td');
                        let td2 = document.createElement('td');
                        let td3 = document.createElement('td');
                        let td4 = document.createElement('td');
                        let td5 = document.createElement('td');
                        let td6 = document.createElement('td');
                        td1.innerHTML = games[i].WhitePlayerName;
                        td2.innerHTML = games[i].BlackPlayerName;
                        switch (games[i].Result) {
                            case "WhiteWon":
                            td3.innerHTML = "1 - 0";
                                break;

                            case "Draw":
                            td3.innerHTML = "1/2 - 1/2";

                            case "BlackWon": 
                            td3.innerHTML = "0 - 1";

                            default:

                                break;
                        }
                        switch (games[i].Gametype) {
                            case "Classical":
                            td4.innerHTML = "Klassisch";
                                break;

                            case "Blitz":
                            td4.innerHTML = "Blitz";

                            case "Rapid": 
                            td4.innerHTML = "Schnellschach";

                            case "Chess960":
                            td4.innerHTML = "Schach960";
                        
                            default:
                            td4.innerHTML = "Klassisch";
                                break;
                        }
                        let date = games[i].Date;
                        date = date.split("T" , 1)
                        td5.innerHTML = date;
                        if(games[i].URL == null){
                            td6.innerHTML = "❌";
                        }else{
                            td6.innerHTML = '<a href="'+ games[i].URL +'">✅></a>';
                        }
                        
                        tr.appendChild(td1);
                        tr.appendChild(td2);
                        tr.appendChild(td3);
                        tr.appendChild(td4);
                        tr.appendChild(td5);
                        tr.appendChild(td6);
                        table.appendChild(tr);
                    }
                })
        }





    </script>
   
</body>

</html>